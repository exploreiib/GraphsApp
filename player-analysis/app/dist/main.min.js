!function(e){!function(){"use strict";function t(e,t){t.otherwise("/"),e.state("ang-login",{url:"/ang-login",templateUrl:"login.html",controller:"LoginController",controllerAs:"vm",data:{activeTab:"home"}}).state("home",{url:"/",templateUrl:"home/home.html",controller:"Home.Controller",controllerAs:"vm",data:{activeTab:"home"}}).state("customerModel",{url:"/customerModel",templateUrl:"customerModel/customerModel.html",controller:"CustomerModel.Controller",controllerAs:"vm",data:{activeTab:"customerModel"}}).state("dashBoard",{url:"/dashBoard",templateUrl:"dashBoard/dashBoard.html",controller:"DashBoard.Controller",controllerAs:"vm",data:{activeTab:"dashBoard"}}).state("playerCampaign",{url:"/playerCampaign",templateUrl:"playerCampaign/index.html",controller:"PlayerCampaign.IndexController",controllerAs:"vm",data:{activeTab:"playerCampaign"}}).state("analyticalReps",{url:"/analyticalReps",templateUrl:"analyticalReps/analyticalreps.html",controller:"analyticalcontroller",controllerAs:"vm",data:{activeTab:"analyticalReps"}}).state("cohort",{url:"/cohort",templateUrl:"cohort/cohort.html",controller:"Cohort.Controller",controllerAs:"vm",data:{activeTab:"cohort"}}).state("romania",{url:"/romania",templateUrl:"romania/romania.html",controller:"Romania.Controller",controllerAs:"vm",data:{activeTab:"romania"}}).state("account",{url:"/account",templateUrl:"account/account.html",controller:"Account.Controller",controllerAs:"vm",data:{activeTab:"account"}})}function i(e,t,i,o){e.defaults.headers.common.Authorization="Bearer "+i.jwtToken,t.$on("$stateChangeSuccess",function(e,i,o,a,n){t.activeTab=i.data.activeTab})}t.$inject=["$stateProvider","$urlRouterProvider"],i.$inject=["$http","$rootScope","$window","$location"],e.module("app",["ui.router","highcharts-ng","LocalStorageModule","angularjs-dropdown-multiselect","hljs","ui.bootstrap","templates"]).config(t).service("$applicationService",["$http","localStorageService",function(e,t){var i=null;return{customerModelDataData:function(e){return e?(i=e,void t.set("graphs.customerModelData",e)):i||t.get("graphs.customerModelData")}}}]).filter("unique",function(){return function(t,i){if(i===!1)return t;if((i||e.isUndefined(i))&&e.isArray(t)){var o=[],a=function(t){return e.isObject(t)&&e.isString(i)?t[i]:t},n={};n[i]="",o.push(n),console.log(o),e.forEach(t,function(t){for(var i=!1,n=0;n<o.length;n++)if(e.equals(a(o[n]),a(t))){i=!0;break}i||o.push(t)}),t=o}return t}}).run(i),$(function(){$.get("/app/token",function(t){window.jwtToken=t,e.bootstrap(document,["app"])})})}(),function(){"use strict";function t(e,t,i){function o(){t.GetCurrent().then(function(e){l.user=e})}function a(){t.Update(l.user).then(function(){i.Success("User updated")}).catch(function(e){i.Error(e)})}function n(){t.Delete(l.user._id).then(function(){e.location="/login"}).catch(function(e){i.Error(e)})}var l=this;l.user=null,l.saveUser=a,l.deleteUser=n,o()}t.$inject=["$window","UserService","FlashService"],e.module("app").controller("Account.Controller",t)}(),function(){"use strict";e.module("app").controller("DashBoard.Controller",["$scope","$http","$anchorScroll","$applicationService","$window",function(e,t,i,o,a){function n(){t.get("/getfiles").success(function(t){console.log("success!"),o.customerModelDataData(t);for(var i,a=[],n=[],r=0,s=0;s<t.life_cycle.length;s++)t.life_cycle[s].Period!==i&&(a[r]={periodID:t.life_cycle[s].Period},r+=1,i=t.life_cycle[s].Period);for(var c=0;c<t.life_cycle.length;c++)t.life_cycle[c].Period===a[0].periodID&&(n[c]={label:t.life_cycle[c].life_cycle_stages,id:t.life_cycle[c].life_cycle_stages});e.periodList=a,e.lifeCycleStagedata=n,l()})}function l(){e.mecampaignsList.data=o.customerModelDataData().effective_campaigns,e.customKPIList.data=o.customerModelDataData().custom_kpi_data,e.modelKPIList.data=o.customerModelDataData().model_based_kpi_data,d(),s("sport_bet"),c("sport_bet")}function r(e,t){var i,a=[],n=o.customerModelDataData()[e];for(i=0;i<n.length;i++)a[i]=n[i][t];return a}function s(t){e.customKPITrendobj={options:{chart:{type:"line"},exporting:{buttons:{contextButton:{enabled:!1}}}},series:[{data:r(t,"value")}],title:{text:"13 weeks Trend Report"},credits:{enabled:!1},loading:!1}}function c(t){e.modelBasedTrendConfig={options:{chart:{type:"line"},exporting:{buttons:{contextButton:{enabled:!1}}}},series:[{data:r("sport_bet","value")}],title:{text:"13 weeks Trend Report"},credits:{enabled:!1},loading:!1}}function d(){e.liveCustomerTrendsChartConfig={options:{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"column"},colors:["#058DC7","#50B432","#ED561B"],plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},legend:{enabled:!0},credits:{enabled:!1},tooltip:{pointFormat:"{series.name}: <b>{point.y}%</b>"},exporting:{buttons:{contextButton:{enabled:!1}}}},credits:{enabled:!1},title:{text:"Distribution",align:"left"},series:[{name:"became_churn",data:r("live_customers_trend","became_churn")},{name:"became_live",data:r("live_customers_trend","became_live")},{type:"spline",name:"NO Of live customers",data:r("live_customers_trend","NoOf_live_customers")}],loading:!1},e.futurePredictionChartConfig={options:{chart:{type:"column"},colors:["#e45d15","#50B432","#ED561B"],legend:{align:"right",x:-30,verticalAlign:"top",y:25,floating:!0,backgroundColor:Highcharts.theme&&Highcharts.theme.background2||"white",borderColor:"#CCC",borderWidth:1,shadow:!1},xAxis:{categories:r("predicted_future_value","date")},yAxis:{min:0,title:{text:"Future Value Prediction"}},exporting:{buttons:{contextButton:{enabled:!1}}}},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0,color:Highcharts.theme&&Highcharts.theme.dataLabelsColor||"white"}}},credits:{enabled:!1},series:[{name:"Acquisition Fv",data:r("predicted_future_value","acquisition_fv")},{name:"Database Fv",data:r("predicted_future_value","database_fv")}],title:{text:"Future Trend Prediction"},loading:!1},e.futurePredictionDonut={options:{chart:{type:"pie",options3d:{enabled:!0,alpha:45}},colors:["#ED561B","#5C2508"],exporting:{buttons:{contextButton:{enabled:!1}}}},plotOptions:{pie:{innerSize:100,depth:45}},credits:{enabled:!1},series:[{name:"Future Prediction",data:[["AcquisitionFv",25],["DatabaseFv",75]]}],title:{text:"Future Trend"},loading:!1}}e.mecampaignsList={data:[]},e.customKPIList={data:[]},e.modelKPIList={data:[]},n(),e.trendof13=function(e){s(e),i("trendrep")},e.campAnalysisPopup=function(e){alert("Action"+e),a.open("http://localhost:3000/app/#/analyticalReps","popup","width=950,height=600,left=10,top=50")},e.modelBasedTrend=function(e){c(e),i("modelBasedTrend")}}])}(),function(){"use strict";function t(e){function t(){e.GetCurrent().then(function(e){i.user=e})}var i=this;i.user=null,t()}t.$inject=["UserService"],e.module("app").controller("Home.Controller",t)}(),function(){"use strict";function t(e){function t(){e.GetCurrent().then(function(e){i.user=e})}var i=this;i.user=null,t()}t.$inject=["UserService"],e.module("app").controller("PlayerCampaign.IndexController",t)}(),function(){"use strict";function t(e,t,i,o){function a(){console.log(t.items),i.get("/getfiles").success(function(e){console.log("success!"),o.customerModelDataData(e)}),e.GetCurrent().then(function(e){l.user=e}),t.playerList.data=n("player_data"),t.playerPreview=!1}function n(e){var i=o.customerModelDataData()[e];console.log("Data::",i);return t.periodList=i,i}var l=this;l.user=null,t.playerPreview=!1,t.trend={value:"Net Revenue"},t.distribution={period:"2016_09_10"},t.meCampList={data:[]},t.playerList={data:[]},t.colors=[{name:"black",shade:"dark"},{name:"white",shade:"light"},{name:"red",shade:"dark"},{name:"red",shade:"dark"},{name:"yellow",shade:"light"}],a(),t.previewResults=function(){console.log("LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL"),t.playerList.data=n("player_data"),t.playerPreview=!0},t.hideResults=function(){t.playerPreview=!1}}t.$inject=["UserService","$scope","$http","$applicationService"],e.module("app").controller("analyticalcontroller",t).filter("gtf",function(){var e=0;return function(t,i,o){var a=[];for(e=0;e<t.length;e++)t[e][o]>=i&&a.push(t[e]);return 0==a?t:(console.log(a),a)}})}(),function(){"use strict";e.module("app").controller("Romania.Controller",["$scope","$http","$applicationService",function(e,t,i){"ngInject";function o(){t.get("/getfiles").success(function(t){console.log("success!"),i.customerModelDataData(t);for(var o,n=[],l=[],r=0,s=0;s<t.life_cycle.length;s++)t.life_cycle[s].Period!==o&&(n[r]={periodID:t.life_cycle[s].Period},r+=1,o=t.life_cycle[s].Period);for(var c=0;c<t.life_cycle.length;c++)t.life_cycle[c].Period===n[0].periodID&&(l[c]={label:t.life_cycle[c].life_cycle_stages,id:t.life_cycle[c].life_cycle_stages});e.periodList=n,e.lifeCycleStagedata=l,a()})}function a(){e.valueSegmentList.data=r(e.distribution.period,"valueseg"),s()}function n(e,t){var o,a=[],n=i.customerModelDataData()[e];for(o=0;o<n.length;o++)a[o]=n[o][t];return a}function l(e,t,o,a,n){var l,r=[],s=i.customerModelDataData()[t],c=0;for(l=0;l<s.length;l++)if(s[l].Period===e){var d={name:s[l][o],y:n?Number((100*s[l][a]).toFixed(2)):Number(s[l][a])};console.log("Data::",d),r[c]=d,c+=1}return r}function r(e,t){var o,a=[],n=i.customerModelDataData()[t],l=0;for(o=0;o<n.length;o++)if(n[o].Period===e){var r=n[o];console.log("Data::",r),a[l]=r,l+=1}return a}function s(){e.lifeCyclePiechartConfig1={options:{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{verticalAlign:"top",enabled:!0,color:"#fff",connectorWidth:1,distance:-30,formatter:function(){return Math.round(this.y)+" %"}},showInLegend:!0}},legend:{enabled:!0,align:"right",verticalAlign:"top",labelFormat:"{name}- {y}%",layout:"vertical"},credits:{enabled:!1},tooltip:{pointFormat:"{series.name}: <b>{point.y}%</b>"},exporting:{buttons:{contextButton:{enabled:!1}}}},title:{text:"Registrations",align:"left"},series:[{name:"registration",colorByPoint:!0,data:l(e.distribution.period,"romania_1","life_cycle_stages","distribution",!0)}],loading:!1},e.lifeCyclePiechartConfig2={options:{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{verticalAlign:"top",enabled:!0,color:"#fff",connectorWidth:1,distance:-30,formatter:function(){return Math.round(this.y)+" %"}},showInLegend:!0}},legend:{enabled:!0,align:"right",verticalAlign:"top",labelFormat:"{name}- {y}%",layout:"vertical"},credits:{enabled:!1},tooltip:{pointFormat:"{series.name}: <b>{point.y}%</b>"},exporting:{buttons:{contextButton:{enabled:!1}}}},title:{text:"Depositors Breakdown  ",align:"left"},series:[{name:"Depositors",colorByPoint:!0,data:l(e.distribution.period,"romania_2","life_cycle_stages","distribution",!0)}],loading:!1},e.lifeCycleBarchartConfig1={options:{chart:{type:"column"},colors:["#e45d15","#50B432","#058DC7"],plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},credits:{enabled:!1},legend:{enabled:!1},exporting:{buttons:{contextButton:{enabled:!1}}}},title:{text:"",align:"left"},xAxis:{type:"category",labels:{rotation:0,style:{fontSize:"10px",fontFamily:"Verdana, sans-serif"}}},yAxis:{min:0,title:{text:""}},series:[{name:"values",data:l(e.distribution.period,"romania_3","life_cycle_stages","avg_future_value",!1),dataLabels:{enabled:!0,color:"#058DC7",align:"right",format:"{point.y:,.0f}",style:{fontSize:"13px",fontFamily:"Verdana, sans-serif"}}}],loading:!1},e.lifeCyclePiechartConfig3={options:{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{verticalAlign:"top",enabled:!0,color:"#fff",connectorWidth:1,distance:-30,formatter:function(){return Math.round(this.y)+" %"}},showInLegend:!0}},legend:{enabled:!0,align:"right",verticalAlign:"top",labelFormat:"{name}- {y}%",layout:"vertical"},credits:{enabled:!1},tooltip:{pointFormat:"{series.name}: <b>{point.y}%</b>"},exporting:{buttons:{contextButton:{enabled:!1}}}},title:{text:"Hybrid Players  ",align:"left"},series:[{name:"Depositors",colorByPoint:!0,data:l(e.distribution.period,"product_distribution","life_cycle_stages","distribution",!0)}],loading:!1},e.lifeCycleBarchartConfig2={options:{chart:{type:"column"},colors:["#6480e8","#50B432","#058DC7"],plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},credits:{enabled:!1},legend:{enabled:!1},exporting:{buttons:{contextButton:{enabled:!1}}}},title:{text:"",align:"left"},xAxis:{type:"category",labels:{rotation:0,style:{fontSize:"13px",fontFamily:"Verdana, sans-serif"}}},yAxis:{min:0,title:{text:""}},series:[{name:"values",data:l(e.distribution.period,"product_distribution_bar","life_cycle_stages","avg_future_value",!1),dataLabels:{enabled:!0,color:"#058DC7",align:"right",format:"{point.y:,.0f}",style:{fontSize:"13px",fontFamily:"Verdana, sans-serif"}}}],loading:!1},e.lifeCyclePiechartConfig4={options:{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{verticalAlign:"top",enabled:!0,color:"#fff",connectorWidth:1,distance:-30,formatter:function(){return Math.round(this.y)+" %"}},showInLegend:!0}},legend:{enabled:!0,align:"right",verticalAlign:"top",labelFormat:"{name}- {y}%",layout:"vertical"},credits:{enabled:!1},tooltip:{pointFormat:"{series.name}: <b>{point.y}%</b>"},exporting:{buttons:{contextButton:{enabled:!1}}}},title:{text:"",align:"left"},series:[{name:"Depositors",colorByPoint:!0,data:l(e.distribution.period,"product_distribution_pie","life_cycle_stages","distribution",!0)}],loading:!1},e.lifeCyclePiechartConfig5={options:{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{verticalAlign:"top",enabled:!0,color:"#fff",connectorWidth:1,distance:-30,formatter:function(){return Math.round(this.y)+" %"}},showInLegend:!0}},legend:{enabled:!0,align:"right",verticalAlign:"top",labelFormat:"{name}- {y}%",layout:"vertical"},credits:{enabled:!1},tooltip:{pointFormat:"{series.name}: <b>{point.y}%</b>"},exporting:{buttons:{contextButton:{enabled:!1}}}},title:{text:"",align:"left"},series:[{name:"Depositors",colorByPoint:!0,data:l(e.distribution.period,"survival_rate","life_cycle_stages","distribution",!0)}],loading:!1},e.lifeCycleBarchartConfig3={options:{chart:{type:"column"},colors:["#6480e8","#50B432","#058DC7"],plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},credits:{enabled:!1},legend:{enabled:!1},exporting:{buttons:{contextButton:{enabled:!1}}}},title:{text:"",align:"left"},xAxis:{type:"category",labels:{rotation:0,style:{fontSize:"13px",fontFamily:"Verdana, sans-serif"}}},yAxis:{min:0,title:{text:""}},series:[{name:"values",data:l(e.distribution.period,"retention_rate","life_cycle_stages","avg_future_value",!1),dataLabels:{enabled:!0,color:"#058DC7",align:"right",format:"{point.y:,.0f}",style:{fontSize:"13px",fontFamily:"Verdana, sans-serif"}}}],loading:!1},e.futurePredictionChartConfig1={options:{chart:{type:"column"},colors:["#e45d15","#50B432"],legend:{align:"right",x:-30,verticalAlign:"top",y:25,floating:!0,backgroundColor:Highcharts.theme&&Highcharts.theme.background2||"white",borderColor:"#CCC",borderWidth:1,shadow:!1},xAxis:{categories:n("product_frequency","date")},yAxis:{min:0,title:{text:""}},exporting:{buttons:{contextButton:{enabled:!1}}}},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0,color:Highcharts.theme&&Highcharts.theme.dataLabelsColor||"white"}}},credits:{enabled:!1},series:[{name:"Casino Frequency",data:n("product_frequency","acquisition_fv")},{name:"Sports Frequency",data:n("product_frequency","database_fv")}],title:{text:""},loading:!1},e.lifeCycleLinechartConfig1={options:{chart:{type:"line"},colors:["#e45d15"],xAxis:{categories:n("deposit_progression","life_cycle_stages")},exporting:{buttons:{contextButton:{enabled:!1}}}},series:[{data:l(e.distribution.period,"deposit_progression","life_cycle_stages","avg_future_value",!1)}],title:{text:""},credits:{enabled:!1},loading:!1},e.liveCustomerTrendsChartConfig={options:{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"column"},colors:["#058DC7","#50B432","#ED561B"],plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},legend:{enabled:!0},credits:{enabled:!1},tooltip:{pointFormat:"{series.name}: <b>{point.y}</b>"},exporting:{buttons:{contextButton:{enabled:!1}}}},credits:{enabled:!1},title:{text:"",align:"left"},series:[{name:"bar",data:n("revenue_distribution","became_churn")},{type:"spline",name:"line",data:n("revenue_distribution","NoOf_live_customers")}],loading:!1},e.survivabilityanalysisconfig={options:{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"column"},xAxis:{categories:n("survivability_analysis","date")},colors:["#058DC7","#50B432","#ED561B"],plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},legend:{enabled:!0},credits:{enabled:!1},tooltip:{pointFormat:"{series.name}: <b>{point.y}</b>"},exporting:{buttons:{contextButton:{enabled:!1}}}},credits:{enabled:!1},title:{text:"",align:"left"},series:[{name:"bar",data:n("survivability_analysis","became_churn")},{type:"spline",name:"line",data:n("survivability_analysis","NoOf_live_customers")}],loading:!1},e.migrationconfig={options:{chart:{type:"bar"},colors:["#6480e8","#50B432","#058DC7"],plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},credits:{enabled:!1},legend:{enabled:!1},exporting:{buttons:{contextButton:{enabled:!1}}}},title:{text:"",align:"left"},xAxis:{type:"category",labels:{rotation:0,style:{fontSize:"13px",fontFamily:"Verdana, sans-serif"}}},yAxis:{min:0,title:{text:""}},series:[{name:"values",data:l(e.distribution.period,"migration","life_cycle_stages","avg_future_value",!1),dataLabels:{enabled:!0,color:"#058DC7",align:"right",format:"{point.y:,.0f}",style:{fontSize:"13px",fontFamily:"Verdana, sans-serif"}}}],loading:!1},e.retentionconfig={options:{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"line"},xAxis:{categories:n("retention","date")},colors:["#058DC7","#50B432","#ED561B"],plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},legend:{enabled:!0},credits:{enabled:!1},tooltip:{pointFormat:"{series.name}: <b>{point.y}%</b>"},exporting:{buttons:{contextButton:{enabled:!1}}}},credits:{enabled:!1},title:{text:"",align:"left"},series:[{name:"Actual",data:n("retention","became_churn")},{type:"line",name:"Standard",data:n("retention","NoOf_live_customers")}],loading:!1}}e.lifeCycleData=[],e.distribution={period:"2016_09_10"},e.valueSegmentList={data:[]},o(),e.updateGraph=function(){e.lifeCyclePiechartConfig1.series[0].data=l(e.distribution.period,"romania_1","life_cycle_stages","distribution",!0),e.lifeCyclePiechartConfig2.series[0].data=l(e.distribution.period,"romania_2","life_cycle_stages","distribution",!0)}}])}(),function(){"use strict";e.module("app").controller("Cohort.Controller",["$scope","$http","$applicationService",function(e,t,i){function o(){var t=[];return t="Casino"===e.cohort.product?[[0,0,10],[1,0,92],[1,1,58],[2,0,35],[2,1,15],[2,2,123],[3,0,72],[3,1,132],[3,2,114],[3,3,19],[4,0,38],[4,1,5],[4,2,8],[4,3,117],[4,4,115],[5,0,88],[5,1,32],[5,2,12],[5,3,6],[5,4,120],[5,5,45],[6,0,13],[6,1,44],[6,2,88],[6,3,98],[6,4,96],[6,5,54],[6,6,12],[7,0,31],[7,1,1],[7,2,82],[7,3,32],[7,4,30],[7,5,76],[7,6,76],[7,7,23],[8,0,85],[8,1,97],[8,2,123],[8,3,64],[8,4,84],[8,5,76],[8,6,23],[8,7,67],[8,8,34],[9,0,47],[9,1,114],[9,2,31],[9,3,48],[9,4,91],[9,5,91],[9,6,91],[9,7,91],[9,8,91],[9,9,91],[10,0,74],[10,1,114],[10,2,31],[10,3,48],[10,4,91],[10,5,91],[10,6,91],[10,7,91],[10,8,91],[10,9,91],[10,10,91],[11,0,3],[11,1,114],[11,2,31],[11,3,48],[11,4,91],[11,5,91],[11,6,91],[11,7,91],[11,8,91],[11,9,91],[11,10,91],[11,11,91],[12,0,5],[12,1,114],[12,2,31],[12,3,48],[12,4,91],[12,5,91],[12,6,91],[12,7,91],[12,8,91],[12,9,91],[12,10,91],[12,11,91],[12,12,91]]:[[0,0,21],[1,0,29],[1,1,85],[2,0,53],[2,1,51],[2,2,321],[3,0,27],[3,1,56],[3,2,23],[3,3,98],[4,0,67],[4,1,89],[4,2,45],[4,3,89],[4,4,45],[5,0,23],[5,1,87],[5,2,35],[5,3,87],[5,4,98],[5,5,45],[6,0,12],[6,1,67],[6,2,98],[6,3,56],[6,4,34],[6,5,23],[6,6,23],[7,0,12],[7,1,56],[7,2,89],[7,3,34],[7,4,23],[7,5,87],[7,6,23],[7,7,65],[8,0,23],[8,1,87],[8,2,98],[8,3,12],[8,4,76],[8,5,98],[8,6,12],[8,7,45],[8,8,12],[9,0,78],[9,1,98],[9,2,12],[9,3,67],[9,4,23],[9,5,12],[9,6,78],[9,7,21],[9,8,12],[9,9,45],[10,0,34],[10,1,67],[10,2,87],[10,3,98],[10,4,56],[10,5,23],[10,6,12],[10,7,45],[10,8,67],[10,9,23],[10,10,34],[11,0,56],[11,1,32],[11,2,78],[11,3,23],[11,4,45],[11,5,21],[11,6,21],[11,7,54],[11,8,78],[11,9,87],[11,10,34],[11,11,45],[12,0,56],[12,1,87],[12,2,45],[12,3,67],[12,4,34],[12,5,23],[12,6,23],[12,7,12],[12,8,12],[12,9,67],[12,10,76],[12,11,23],[12,12,1]]}function a(){e.heatMapchartConfig={options:{chart:{marginTop:40,marginBottom:80,type:"heatmap"},colorAxis:{min:0,minColor:"#FFFFFF",maxColor:Highcharts.getOptions().colors[0]},plotOptions:{heatmap:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},legend:{enabled:!0,align:"right",layout:"vertical",margin:0,verticalAlign:"top",y:25,symbolHeight:280},credits:{enabled:!1},tooltip:{formatter:function(){return"<b>"+this.series.xAxis.categories[this.point.x]+"<br>"+this.point.value}},title:{text:""},xAxis:{opposite:!0,categories:["Oct","Nov","Dec","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct"]},yAxis:{categories:["Nov","Dec","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov"],title:null,reversed:!0},exporting:{buttons:{contextButton:{enabled:!1}}}},series:[{borderWidth:1,data:o(),dataLabels:{enabled:!0,color:"#000000"}}],loading:!1}}e.cohort={product:"Poker"},e.productList=[{productID:"Poker"},{productID:"Casino"}],a(),e.updateGraph=function(){a()}}])}(),function(){"use strict";function t(e,t,i){function o(){a.dataLoading=!0,t.Login(a.username,a.password,function(o){o.success?(t.SetCredentials(a.username,a.password),e.path("/")):(i.Error(o.message),a.dataLoading=!1)})}var a=this;a.login=o,function(){t.ClearCredentials()}()}e.module("app").controller("LoginController",t),t.$inject=["$location","AuthenticationService","FlashService"]}(),function(){"use strict";e.module("app").controller("CustomerModel.Controller",["$scope","$http","$applicationService",function(e,t,i){function o(){t.get("/getfiles").success(function(t){console.log("success!"),i.customerModelDataData(t);for(var o,n=[],l=[],r=0,s=0;s<t.life_cycle.length;s++)t.life_cycle[s].Period!==o&&(n[r]={periodID:t.life_cycle[s].Period},r+=1,o=t.life_cycle[s].Period);for(var c=0;c<t.life_cycle.length;c++)t.life_cycle[c].Period===n[0].periodID&&(l[c]={label:t.life_cycle[c].life_cycle_stages,id:t.life_cycle[c].life_cycle_stages});e.periodList=n,e.lifeCycleStagedata=l,a()})}function a(){e.daysSinceRegList.data=n(e.distribution.period,"days_since_reg"),e.daysSinceLastActivityList.data=n(e.distribution.period,"days_since_last_activity"),e.playerActivityList.data=n(e.distribution.period,"player_activity"),e.productReferenceList.data=n(e.distribution.period,"product_preferences"),e.valueSegmentList.data=n(e.distribution.period,"valueseg"),c(),r()}function n(e,t){var o,a=[],n=i.customerModelDataData()[t],l=0;for(o=0;o<n.length;o++)if(n[o].Period===e){var r=n[o];console.log("Data::",r),a[l]=r,l+=1}return a}function l(e,t,o,a,n){var l,r=[],s=i.customerModelDataData()[t],c=0;for(l=0;l<s.length;l++)if(s[l].Period===e){var d={name:s[l][o],y:n?Number((100*s[l][a]).toFixed(2)):Number(s[l][a])};console.log("Data::",d),r[c]=d,c+=1}return r}function r(){e.lifeCyclePiechartConfig={options:{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},legend:{enabled:!0,align:"right",verticalAlign:"top",labelFormat:"{name}- {y}%",layout:"vertical"},credits:{enabled:!1},tooltip:{pointFormat:"{series.name}: <b>{point.y}%</b>"},exporting:{buttons:{contextButton:{enabled:!1}}}},title:{text:"Distribution",align:"left"},series:[{name:"Distribution",colorByPoint:!0,data:l(e.distribution.period,"life_cycle","life_cycle_stages","distribution",!0)}],loading:!1},e.lifeCycleBarchartConfig={options:{chart:{type:"column"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},credits:{enabled:!1},legend:{enabled:!1},exporting:{buttons:{contextButton:{enabled:!1}}}},title:{text:"Avg.Future value",align:"left"},xAxis:{type:"category",labels:{rotation:0,style:{fontSize:"13px",fontFamily:"Verdana, sans-serif"}}},yAxis:{min:0,title:{text:""}},series:[{name:"Avg.Future Value",data:l(e.distribution.period,"life_cycle","life_cycle_stages","avg_future_value",!1),dataLabels:{enabled:!0,color:"#FFFFFF",align:"right",format:"{point.y:,.0f}",style:{fontSize:"13px",fontFamily:"Verdana, sans-serif"}}}],loading:!1},e.daysSinceRegPiechartConfig={options:{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},legend:{enabled:!0,align:"right",verticalAlign:"top",labelFormat:"{name}- {y}%",layout:"vertical"},credits:{enabled:!1},tooltip:{pointFormat:"{series.name}: <b>{point.y}%</b>"},exporting:{buttons:{contextButton:{enabled:!1}}}},title:{text:"Distribution",align:"left"},series:[{name:"Distribution",colorByPoint:!0,data:l(e.distribution.period,"days_since_reg","days_since_reg","distribution",!0)}],loading:!1},e.daysSinceRegBarchartConfig={options:{chart:{type:"column"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},credits:{enabled:!1},legend:{enabled:!1},exporting:{buttons:{contextButton:{enabled:!1}}}},title:{text:"Future value",align:"left"},xAxis:{type:"category",labels:{rotation:0,style:{fontSize:"13px",fontFamily:"Verdana, sans-serif"}}},yAxis:{min:0,title:{text:""}},series:[{name:"Future Value",data:l(e.distribution.period,"days_since_reg","days_since_reg","future_value",!1),dataLabels:{enabled:!0,align:"right",format:"{point.y}",style:{fontSize:"13px",fontFamily:"Verdana, sans-serif"}}}],loading:!1}}function s(){e.$$phase||e.$apply()}function c(){var t=0,i=[],o=n(e.distribution.period,"micro_seg"),a=e.lifeCycleStageModel;if(0===a.length)return void(e.microSegmentList.data=[]);for(var l=0;l<a.length;l++)for(var r=0;r<o.length;r++)if(o[r].life_cycle_stages===a[l].id){var c=o[r];console.log("Data::",c),i[t]=c,t+=1}e.microSegmentList.data=i,s()}e.lifeCycleData=[],e.distribution={period:"2016_09_10"},e.daysSinceRegList={data:[]},e.daysSinceLastActivityList={data:[]},e.playerActivityList={data:[]},e.productReferenceList={data:[]},e.microSegmentList={data:[]},e.valueSegmentList={data:[]},e.lifeCycleStageModel=[{id:"Non Depositor"}],e.showDaysSinceReg=!0,e.showDaysSinceLastActivity=!1,e.showProductRefs=!1,e.showPlayerActivity=!1,o(),e.updateGraph=function(){console.log("inside updateGraph",e.distribution.period),e.lifeCyclePiechartConfig.series[0].data=l(e.distribution.period,"life_cycle","life_cycle_stages","distribution",!0),e.lifeCycleBarchartConfig.series[0].data=l(e.distribution.period,"life_cycle","life_cycle_stages","avg_future_value",!1),e.daysSinceRegPiechartConfig.series[0].data=l(e.distribution.period,"days_since_reg","days_since_reg","distribution",!0),e.daysSinceRegBarchartConfig.series[0].data=l(e.distribution.period,"days_since_reg","days_since_reg","future_value",!1),"undefined"!=typeof e.daysSinceLastPiechartConfig&&(e.daysSinceLastPiechartConfig.series[0].data=l(e.distribution.period,"days_since_last_activity","days_since_last_activity","distribution",!0),e.daysSinceLastBarchartConfig.series[0].data=l(e.distribution.period,"days_since_last_activity","days_since_last_activity","future_value",!1)),"undefined"!=typeof e.playerActivityPiechartConfig&&(e.playerActivityPiechartConfig.series[0].data=l(e.distribution.period,"player_activity","player_activity","distribution",!0),e.playerActivityBarchartConfig.series[0].data=l(e.distribution.period,"player_activity","player_activity","future_value",!1)),"undefined"!=typeof e.productReferencePiechartConfig&&(e.productReferencePiechartConfig.series[0].data=l(e.distribution.period,"product_preferences","Activity_type","distribution",!0),e.productReferenceBarchartConfig.series[0].data=l(e.distribution.period,"product_preferences","Activity_type","future_value",!1)),a()},e.displyDaysSinceReg=function(){e.showDaysSinceReg=!0,e.showDaysSinceLastActivity=!1,e.showProductRefs=!1,e.showPlayerActivity=!1},e.displyDaysSinceLast=function(){e.showDaysSinceReg=!1,e.showDaysSinceLastActivity=!0,e.showProductRefs=!1,e.showPlayerActivity=!1,e.daysSinceLastPiechartConfig={options:{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},colors:["#ED561B","#5C2508","#e45d15","#50B432","#058DC7"],plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},legend:{enabled:!0,align:"right",verticalAlign:"top",labelFormat:"{name}- {y}%",layout:"vertical"},credits:{enabled:!1},tooltip:{pointFormat:"{series.name}: <b>{point.y}%</b>"},exporting:{buttons:{contextButton:{enabled:!1}}}},title:{text:"Distribution",align:"left"},series:[{name:"Distribution",data:l(e.distribution.period,"days_since_last_activity","days_since_last_activity","distribution",!0)}],loading:!1},e.daysSinceLastBarchartConfig={options:{chart:{type:"column"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},credits:{enabled:!1},legend:{enabled:!1},exporting:{buttons:{contextButton:{enabled:!1}}}},title:{text:"Future value",align:"left"},xAxis:{type:"category",labels:{rotation:0,style:{fontSize:"13px",fontFamily:"Verdana, sans-serif"}}},yAxis:{min:0,title:{text:""}},series:[{name:"Future Value",colorByPoint:!0,data:l(e.distribution.period,"days_since_last_activity","days_since_last_activity","future_value",!1),dataLabels:{enabled:!0,align:"right",format:"{point.y}",style:{fontSize:"13px",fontFamily:"Verdana, sans-serif"}}}],loading:!1}},e.displyPlayerActivity=function(){e.showDaysSinceReg=!1,e.showDaysSinceLastActivity=!1,e.showProductRefs=!1,e.showPlayerActivity=!0,e.playerActivityPiechartConfig={options:{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},colors:["#ED561B","#5C2508","#e45d15","#50B432","#058DC7"],plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},legend:{enabled:!0,align:"right",verticalAlign:"top",labelFormat:"{name}- {y}%",layout:"vertical"},credits:{enabled:!1},tooltip:{pointFormat:"{series.name}: <b>{point.y}%</b>"},exporting:{buttons:{contextButton:{enabled:!1}}}},title:{text:"Distribution",align:"left"},series:[{name:"Distribution",colorByPoint:!0,data:l(e.distribution.period,"player_activity","player_activity","distribution",!0)}],loading:!1},e.playerActivityBarchartConfig={options:{chart:{type:"column"},color:["#ED561B","#5C2508","#e45d15"],plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},credits:{enabled:!1},legend:{enabled:!1},exporting:{buttons:{contextButton:{enabled:!1}}}},title:{text:"Future value",align:"left"},xAxis:{type:"category",labels:{rotation:0,style:{fontSize:"13px",fontFamily:"Verdana, sans-serif"}}},yAxis:{min:0,title:{text:""}},series:[{name:"Future Value",data:l(e.distribution.period,"player_activity","player_activity","future_value",!1),dataLabels:{enabled:!0,colorByPoint:!0,align:"right",format:"{point.y}",style:{fontSize:"13px",fontFamily:"Verdana, sans-serif"}}}],loading:!1}},e.displyProductPreference=function(){
e.showDaysSinceReg=!1,e.showDaysSinceLastActivity=!1,e.showProductRefs=!0,e.showPlayerActivity=!1,e.productReferencePiechartConfig={options:{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},colors:["#ED561B","#5C2508","#e45d15","#50B432","#058DC7"],plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},legend:{enabled:!0,align:"right",verticalAlign:"top",labelFormat:"{name}- {y}%",layout:"vertical"},credits:{enabled:!1},tooltip:{pointFormat:"{series.name}: <b>{point.y}%</b>"},exporting:{buttons:{contextButton:{enabled:!1}}}},title:{text:"Distribution",align:"left"},series:[{name:"Distribution",colorByPoint:!0,data:l(e.distribution.period,"product_preferences","Activity_type","distribution",!0)}],loading:!1},e.productReferenceBarchartConfig={options:{chart:{type:"column"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},credits:{enabled:!1},legend:{enabled:!1},exporting:{buttons:{contextButton:{enabled:!1}}}},title:{text:"Future value",align:"left"},xAxis:{type:"category",labels:{rotation:0,style:{fontSize:"13px",fontFamily:"Verdana, sans-serif"}}},yAxis:{min:0,title:{text:""}},series:[{name:"Future Value",data:l(e.distribution.period,"product_preferences","Activity_type","future_value",!1),dataLabels:{enabled:!0,colorByPoint:!0,align:"right",format:"{point.y}",style:{fontSize:"13px",fontFamily:"Verdana, sans-serif"}}}],loading:!1}},e.lifeCycleStageSettings={scrollableHeight:"200px",scrollable:!0,enableSearch:!0},e.lifeCycleStageTexts={checkAll:"All",uncheckAll:"None",selectionCount:"checked",selectionOf:"/",searchPlaceholder:"Quick Find...",buttonDefaultText:"Select",dynamicButtonTextSuffix:"checked"},e.microSegEvents={onSelectAll:function(e){c()},onItemDeselect:function(e){c()},onItemSelect:function(e){c()},onDeselectAll:function(t){e.microSegmentList.data=[]},onInitDone:function(e){c()}}}])}()}(angular);
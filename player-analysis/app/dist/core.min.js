!function(e){(function(){"use strict";var t=e.module("LocalStorageModule",[]);t.provider("localStorageService",function(){this.prefix="ls",this.storageType="localStorage",this.cookie={expiry:30,path:"/"},this.notify={setItem:!0,removeItem:!1},this.setPrefix=function(e){this.prefix=e},this.setStorageType=function(e){this.storageType=e},this.setStorageCookie=function(e,t){this.cookie={expiry:e,path:t}},this.setStorageCookieDomain=function(e){this.cookie.domain=e},this.setNotify=function(e,t){this.notify={setItem:e,removeItem:t}},this.$get=["$rootScope","$window","$document",function(t,o,r){var n,i=this,a=i.prefix,c=i.cookie,s=i.notify,u=i.storageType;r?r[0]&&(r=r[0]):r=document,"."!==a.substr(-1)&&(a=a?a+".":"");var l=function(e){return a+e},f=function(){try{var e=u in o&&null!==o[u],r=l("__"+Math.round(1e7*Math.random()));return e&&(n=o[u],n.setItem(r,""),n.removeItem(r)),e}catch(e){return u="cookie",t.$broadcast("LocalStorageModule.notification.error",e.message),!1}}(),g=function(o,r){if(!f||"cookie"===i.storageType)return f||t.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),s.setItem&&t.$broadcast("LocalStorageModule.notification.setitem",{key:o,newvalue:r,storageType:"cookie"}),y(o,r);"undefined"==typeof r&&(r=null);try{(e.isObject(r)||e.isArray(r))&&(r=e.toJson(r)),n&&n.setItem(l(o),r),s.setItem&&t.$broadcast("LocalStorageModule.notification.setitem",{key:o,newvalue:r,storageType:i.storageType})}catch(e){return t.$broadcast("LocalStorageModule.notification.error",e.message),y(o,r)}return!0},d=function(o){if(!f||"cookie"===i.storageType)return f||t.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),T(o);var r=n?n.getItem(l(o)):null;return r&&"null"!==r?"{"===r.charAt(0)||"["===r.charAt(0)?e.fromJson(r):r:null},h=function(e){if(!f||"cookie"===i.storageType)return f||t.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),s.removeItem&&t.$broadcast("LocalStorageModule.notification.removeitem",{key:e,storageType:"cookie"}),v(e);try{n.removeItem(l(e)),s.removeItem&&t.$broadcast("LocalStorageModule.notification.removeitem",{key:e,storageType:i.storageType})}catch(o){return t.$broadcast("LocalStorageModule.notification.error",o.message),v(e)}return!0},p=function(){if(!f)return t.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),!1;var e=a.length,o=[];for(var r in n)if(r.substr(0,e)===a)try{o.push(r.substr(e))}catch(e){return t.$broadcast("LocalStorageModule.notification.error",e.Description),[]}return o},m=function(e){e=e||"";var o=a.slice(0,-1),r=new RegExp(o+"."+e);if(!f||"cookie"===i.storageType)return f||t.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),O();var c=a.length;for(var s in n)if(r.test(s))try{h(s.substr(c))}catch(e){return t.$broadcast("LocalStorageModule.notification.error",e.message),O()}return!0},S=function(){try{return navigator.cookieEnabled||"cookie"in r&&(r.cookie.length>0||(r.cookie="test").indexOf.call(r.cookie,"test")>-1)}catch(e){return t.$broadcast("LocalStorageModule.notification.error",e.message),!1}},y=function(e,o){if("undefined"==typeof o)return!1;if(!S())return t.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;try{var n="",i=new Date,a="";if(null===o?(i.setTime(i.getTime()+-864e5),n="; expires="+i.toGMTString(),o=""):0!==c.expiry&&(i.setTime(i.getTime()+24*c.expiry*60*60*1e3),n="; expires="+i.toGMTString()),e){var s="; path="+c.path;c.domain&&(a="; domain="+c.domain),r.cookie=l(e)+"="+encodeURIComponent(o)+n+s+a}}catch(e){return t.$broadcast("LocalStorageModule.notification.error",e.message),!1}return!0},T=function(e){if(!S())return t.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;for(var o=r.cookie&&r.cookie.split(";")||[],n=0;n<o.length;n++){for(var i=o[n];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(l(e)+"="))return decodeURIComponent(i.substring(a.length+e.length+1,i.length))}return null},v=function(e){y(e,null)},O=function(){for(var e=null,t=a.length,o=r.cookie.split(";"),n=0;n<o.length;n++){for(e=o[n];" "===e.charAt(0);)e=e.substring(1,e.length);var i=e.substring(t,e.indexOf("="));v(i)}},L=function(){return u},k=function(t,o,r){var n=d(o);null===n&&e.isDefined(r)?n=r:e.isObject(n)&&e.isObject(r)&&(n=e.extend(r,n)),t[o]=n,t.$watchCollection(o,function(e){g(o,e)})};return{isSupported:f,getStorageType:L,set:g,add:g,get:d,keys:p,remove:h,clearAll:m,bind:k,deriveKey:l,cookie:{set:y,add:y,get:T,remove:v,clearAll:O}}}]})}).call(this),function(){"use strict";function t(e){function t(){function t(){var t=e.flash;t&&(t.keepAfterLocationChange?t.keepAfterLocationChange=!1:delete e.flash)}e.$on("$locationChangeStart",function(){t()})}function o(t,o){e.flash={message:t,type:"success",keepAfterLocationChange:o}}function r(t,o){e.flash={message:t,type:"danger",keepAfterLocationChange:o}}var n={};return n.Success=o,n.Error=r,t(),n}t.$inject=["$rootScope"],e.module("app").factory("FlashService",t)}(),function(){"use strict";function t(e,t){function o(){return e.get("/api/users/current").then(u,l)}function r(){return e.get("/api/users").then(u,l)}function n(t){return e.get("/api/users/"+t).then(u,l)}function i(t){return e.get("/api/users/"+t).then(u,l)}function a(t){return e.post("/api/users",t).then(u,l)}function c(t){return e.put("/api/users/"+t._id,t).then(u,l)}function s(t){return e.delete("/api/users/"+t).then(u,l)}function u(e){return e.data}function l(e){return t.reject(e.data)}var f={};return f.GetCurrent=o,f.GetAll=r,f.GetById=n,f.GetByUsername=i,f.Create=a,f.Update=c,f.Delete=s,f}t.$inject=["$http","$q"],e.module("app").factory("UserService",t)}()}(angular);
(function(){"use strict";var e=angular.module("LocalStorageModule",[]);e.provider("localStorageService",function(){this.prefix="ls",this.storageType="localStorage",this.cookie={expiry:30,path:"/"},this.notify={setItem:!0,removeItem:!1},this.setPrefix=function(e){this.prefix=e},this.setStorageType=function(e){this.storageType=e},this.setStorageCookie=function(e,t){this.cookie={expiry:e,path:t}},this.setStorageCookieDomain=function(e){this.cookie.domain=e},this.setNotify=function(e,t){this.notify={setItem:e,removeItem:t}},this.$get=["$rootScope","$window","$document",function(e,t,o){var r,n=this,a=n.prefix,i=n.cookie,c=n.notify,u=n.storageType;o?o[0]&&(o=o[0]):o=document,"."!==a.substr(-1)&&(a=a?a+".":"");var s=function(e){return a+e},l=function(){try{var o=u in t&&null!==t[u],n=s("__"+Math.round(1e7*Math.random()));return o&&(r=t[u],r.setItem(n,""),r.removeItem(n)),o}catch(t){return u="cookie",e.$broadcast("LocalStorageModule.notification.error",t.message),!1}}(),f=function(t,o){if(!l||"cookie"===n.storageType)return l||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),c.setItem&&e.$broadcast("LocalStorageModule.notification.setitem",{key:t,newvalue:o,storageType:"cookie"}),S(t,o);"undefined"==typeof o&&(o=null);try{(angular.isObject(o)||angular.isArray(o))&&(o=angular.toJson(o)),r&&r.setItem(s(t),o),c.setItem&&e.$broadcast("LocalStorageModule.notification.setitem",{key:t,newvalue:o,storageType:n.storageType})}catch(r){return e.$broadcast("LocalStorageModule.notification.error",r.message),S(t,o)}return!0},g=function(t){if(!l||"cookie"===n.storageType)return l||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),y(t);var o=r?r.getItem(s(t)):null;return o&&"null"!==o?"{"===o.charAt(0)||"["===o.charAt(0)?angular.fromJson(o):o:null},d=function(t){if(!l||"cookie"===n.storageType)return l||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),c.removeItem&&e.$broadcast("LocalStorageModule.notification.removeitem",{key:t,storageType:"cookie"}),T(t);try{r.removeItem(s(t)),c.removeItem&&e.$broadcast("LocalStorageModule.notification.removeitem",{key:t,storageType:n.storageType})}catch(o){return e.$broadcast("LocalStorageModule.notification.error",o.message),T(t)}return!0},h=function(){if(!l)return e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),!1;var t=a.length,o=[];for(var n in r)if(n.substr(0,t)===a)try{o.push(n.substr(t))}catch(t){return e.$broadcast("LocalStorageModule.notification.error",t.Description),[]}return o},p=function(t){t=t||"";var o=a.slice(0,-1),i=new RegExp(o+"."+t);if(!l||"cookie"===n.storageType)return l||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),v();var c=a.length;for(var u in r)if(i.test(u))try{d(u.substr(c))}catch(t){return e.$broadcast("LocalStorageModule.notification.error",t.message),v()}return!0},m=function(){try{return navigator.cookieEnabled||"cookie"in o&&(o.cookie.length>0||(o.cookie="test").indexOf.call(o.cookie,"test")>-1)}catch(t){return e.$broadcast("LocalStorageModule.notification.error",t.message),!1}},S=function(t,r){if("undefined"==typeof r)return!1;if(!m())return e.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;try{var n="",a=new Date,c="";if(null===r?(a.setTime(a.getTime()+-864e5),n="; expires="+a.toGMTString(),r=""):0!==i.expiry&&(a.setTime(a.getTime()+24*i.expiry*60*60*1e3),n="; expires="+a.toGMTString()),t){var u="; path="+i.path;i.domain&&(c="; domain="+i.domain),o.cookie=s(t)+"="+encodeURIComponent(r)+n+u+c}}catch(t){return e.$broadcast("LocalStorageModule.notification.error",t.message),!1}return!0},y=function(t){if(!m())return e.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;for(var r=o.cookie&&o.cookie.split(";")||[],n=0;n<r.length;n++){for(var i=r[n];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(s(t)+"="))return decodeURIComponent(i.substring(a.length+t.length+1,i.length))}return null},T=function(e){S(e,null)},v=function(){for(var e=null,t=a.length,r=o.cookie.split(";"),n=0;n<r.length;n++){for(e=r[n];" "===e.charAt(0);)e=e.substring(1,e.length);var i=e.substring(t,e.indexOf("="));T(i)}},O=function(){return u},L=function(e,t,o){var r=g(t);null===r&&angular.isDefined(o)?r=o:angular.isObject(r)&&angular.isObject(o)&&(r=angular.extend(o,r)),e[t]=r,e.$watchCollection(t,function(e){f(t,e)})};return{isSupported:l,getStorageType:O,set:f,add:f,get:g,keys:h,remove:d,clearAll:p,bind:L,deriveKey:s,cookie:{set:S,add:S,get:y,remove:T,clearAll:v}}}]})}).call(this),function(){"use strict";function e(e){function t(){function t(){var t=e.flash;t&&(t.keepAfterLocationChange?t.keepAfterLocationChange=!1:delete e.flash)}e.$on("$locationChangeStart",function(){t()})}function o(t,o){e.flash={message:t,type:"success",keepAfterLocationChange:o}}function r(t,o){e.flash={message:t,type:"danger",keepAfterLocationChange:o}}var n={};return n.Success=o,n.Error=r,t(),n}angular.module("app").factory("FlashService",e)}(),function(){"use strict";function e(e,t){function o(){return e.get("/api/users/current").then(s,l)}function r(){return e.get("/api/users").then(s,l)}function n(t){return e.get("/api/users/"+t).then(s,l)}function a(t){return e.get("/api/users/"+t).then(s,l)}function i(t){return e.post("/api/users",t).then(s,l)}function c(t){return e.put("/api/users/"+t._id,t).then(s,l)}function u(t){return e.delete("/api/users/"+t).then(s,l)}function s(e){return e.data}function l(e){return t.reject(e.data)}var f={};return f.GetCurrent=o,f.GetAll=r,f.GetById=n,f.GetByUsername=a,f.Create=i,f.Update=c,f.Delete=u,f}angular.module("app").factory("UserService",e)}();